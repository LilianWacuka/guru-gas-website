{% extends 'products/base.html' %}
{% block content %}
<h2>Your Cart</h2>
<ul>
    {% for item in items %}
        <li>
            {{ item.product.product_name }} -
            {{ item.quantity }} Ã— {{ item.product.price }}
            = {{ item.total_price }}

            <!-- Update quantity form -->
            <form action="{% url 'update_cart' item.pk %}" method="post" style="display:inline;">
                {% csrf_token %}
                <input type="number" name="quantity" value="{{ item.quantity }}" min="0">
                <button type="submit">Update</button>
            </form>

            <!-- Remove item form -->
            <form action="{% url 'remove_from_cart' item.pk %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit">Remove</button>
            </form>
        </li>
    {% empty %}
        <li>Your cart is empty.</li>
    {% endfor %}
</ul>

<p>Total: {{ cart.total_price }}</p>

<form action="{% url 'checkout' %}" method="post">
    {% csrf_token %}
    <button type="submit">Checkout</button>
</form>


{% endblock %}

